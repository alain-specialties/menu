<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Philbo Data Viewer</title>
    <style>
        /* Base styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111;
            color: #c0a16b;
            padding: 20px;
            user-select: none;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            margin: 0;
            box-sizing: border-box;
        }
        .container {
            width: 100%;
            max-width: 1200px;
            padding: 0 10px;
        }
        h1, h2 {
            text-align: center;
            color: #c0a16b;
        }
        /* Herstelde loginbox opmaak */
        #loginBox {
            text-align: center;
            margin-top: 100px;
            padding: 20px;
            border-radius: 10px;
            background-color: #222;
        }
        #orderBox, #cartSummary, #checkoutForm, #orderConfirmation {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            border-radius: 10px;
            background-color: #222;
        }
        /* Aangepaste input velden */
        input[type="text"], input[type="password"] {
            padding: 8px;
            margin: 5px;
            border-radius: 5px;
            border: 1px solid #555;
            background-color: #333;
            color: #c0a16b;
            width: 250px; /* Vast breedte voor de inputvelden */
            max-width: calc(100% - 14px); /* Zorgt dat het niet breder is dan het scherm op mobiel */
            box-sizing: border-box;
        }
        /* Overige inputs behouden hun volledige breedte */
        input:not([type="text"]):not([type="password"]), select, textarea {
            padding: 8px;
            margin: 5px;
            border-radius: 5px;
            border: 1px solid #555;
            background-color: #333;
            color: #c0a16b;
            width: calc(100% - 14px);
            box-sizing: border-box;
        }
        button {
            padding: 8px 16px;
            margin: 5px;
            border-radius: 5px;
            background-color: #555;
            color: #fff;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #777;
        }
        #loginError, #messageBox {
            color: red;
            font-weight: bold;
        }

        /* Table specific styles */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            cursor: default;
        }
        th, td {
            border: 1px solid #555;
            padding: 8px;
            text-align: left;
            color: #c0a16b;
        }
        th {
            background-color: #333;
            cursor: pointer;
        }
        tr:nth-child(even) {
            background-color: #222;
        }
        #searchBox {
            margin: 10px 0;
            padding: 8px;
            width: 100%;
            box-sizing: border-box;
        }
        th.sort-asc::after {
            content: " \25B2";
        }
        th.sort-desc::after {
            content: " \25BC";
        }
        #legend, #disclaimer {
            margin-top: 10px;
            font-size: 14px;
            color: #c0a16b;
            text-align: center;
        }
        #disclaimer {
            font-style: italic;
        }
        
        /* Winkelwagen-knop aanpassing */
        .cart-button {
            float: right;
            padding: 15px 30px; /* Maakt de knop groter */
            font-size: 1.2rem;
            margin-bottom: 20px;
            width: auto; /* Voorkomt dat de knop de volledige breedte inneemt */
        }
        
        /* Modal styles */
        #messageModal, #ageVerificationModal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.4);
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #333;
            padding: 20px;
            border: 1px solid #888;
            width: 90%;
            max-width: 400px;
            text-align: center;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        .close-button {
            color: #c0a16b;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close-button:hover, .close-button:focus {
            color: #fff;
            text-decoration: none;
            cursor: pointer;
        }

        /* Cart and Checkout styles */
        #cartSummary, #checkoutForm {
            margin-top: 20px;
            text-align: left;
            padding: 15px;
            display: none;
        }
        #cartSummary h3 {
            text-align: center;
        }
        .pickup-note, .payment-info {
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            text-align: center;
        }
        .pickup-note {
            border: 2px solid #c0a16b;
            color: #e6b800;
        }
        .payment-info {
            border: 2px solid #c0a16b;
        }
        .payment-info a {
            color: #e6b800;
            text-decoration: underline;
        }
        #cartItemsList {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }
        #cartItemsList li {
            border-bottom: 1px solid #444;
            padding: 8px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .quantity-controls button {
            padding: 2px 8px;
        }

        /* Responsive Table for Mobile */
        @media screen and (max-width: 768px) {
            table, thead, tbody, th, td, tr {
                display: block;
            }
            thead tr {
                position: absolute;
                top: -9999px;
                left: -9999px;
            }
            tr {
                border: 1px solid #555;
                margin-bottom: 15px;
            }
            td {
                border: none;
                position: relative;
                padding-left: 50%;
                text-align: right;
            }
            td::before {
                content: attr(data-label);
                position: absolute;
                left: 6px;
                width: 45%;
                padding-right: 10px;
                white-space: nowrap;
                text-align: left;
                font-weight: bold;
            }
            .order-controls {
                justify-content: flex-end;
            }
        }
    </style>
</head>
<body oncontextmenu="return false;">
    <div class="container">
        <h1>Philbo Data Viewer</h1>
        <div id="loginBox">
            <h2>Login</h2>
            <input type="text" id="username" placeholder="Username"><br>
            <input type="password" id="password" placeholder="Password"><br>
            <button onclick="checkLogin()">Login</button>
            <p id="loginError" style="color:red;"></p>
        </div>
        <div id="catalog" style="display:none;">
            <input type="text" id="searchBox" placeholder="Search..." onkeyup="filterTable()">
            <div id="legend">Legend: V = In stock &nbsp; O = Pre-order by BOX if available</div>
            <div id="disclaimer">Prices are indicative and subject to change. The final price is determined by the tax stamp at the time of delivery.</div>
            <button class="cart-button" onclick="showCart()">ðŸ›’ Cart (<span id="cartItemCount">0</span>)</button>
            <table id="cigarTable">
                <thead>
                    <tr id="headerRow"></tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        
        <div id="cartSummary" style="display:none;">
            <h3>Your Order</h3>
            <ul id="cartItemsList">
                </ul>
            <p id="cartTotal">Total: â‚¬0.00</p>
            <button onclick="showCheckout()">Proceed to Checkout</button>
            <button onclick="showCatalog()">Back to Catalog</button>
        </div>

        <div id="checkoutForm" style="display:none;">
            <h3>Your Details</h3>
            <div class="pickup-note">
                <p>All orders must be picked up. It is forbidden by law to ship tobacco products.</p>
            </div>
            <p>Please enter your details and place your order. The order will be sent to us via email.</p>
            <input type="text" id="customerName" placeholder="Name" required><br>
            <input type="email" id="customerEmail" placeholder="Email" required><br>
            <input type="tel" id="customerPhone" placeholder="Phone Number"><br>
            <input type="text" id="customerAddress" placeholder="Address"><br>
            <textarea id="customerNotes" placeholder="Order notes..." rows="4"></textarea><br>
            <div class="payment-info">
                <p>Don't forget to pay a 50% deposit via the link below.</p>
                <p id="depositAmount">The deposit amount is: â‚¬0.00</p>
                <a href="https://revolut.me/alainthgq" target="_blank">revolut.me/alainthgq</a>
            </div>
            <button onclick="sendOrder()">Place Order</button>
            <button onclick="showCart()">Back to Cart</button>
        </div>
    </div>
    
    <div id="messageModal">
      <div class="modal-content">
        <span class="close-button" onclick="hideMessage()">&times;</span>
        <p id="messageText"></p>
      </div>
    </div>

    <div id="ageVerificationModal">
        <div class="modal-content">
            <p>This website contains information about tobacco products. According to Belgian law, the sale of tobacco products is prohibited for persons under 18 years of age. By clicking 'Confirm', you declare that you are 18 years or older.</p>
            <button onclick="confirmAge()">Confirm</button>
            <button onclick="denyAge()">Cancel</button>
        </div>
    </div>
    
    <script>
        let allData = [];
        let currentSort = { index: -1, asc: true };
        let cart = [];

        function stripBOM(s) { return s && s.charCodeAt(0) === 0xFEFF ? s.slice(1) : s; }

        function detectDelimiter(text) {
            const firstLine = (text.split(/\r?\n/).find(l => l.trim().length > 0) || "");
            const counts = { ';': 0, ',': 0, '\t': 0, '|': 0 };
            let inQuotes = false;
            for (let i = 0; i < firstLine.length; i++) {
                const ch = firstLine[i];
                if (ch === '"') {
                    if (inQuotes && firstLine[i + 1] === '"') { i++; continue; }
                    inQuotes = !inQuotes; continue;
                }
                if (!inQuotes && counts.hasOwnProperty(ch)) counts[ch]++;
            }
            let best = ';', bestCount = -1;
            for (const k in counts) {
                if (counts[k] > bestCount) {
                    best = k;
                    bestCount = counts[k];
                }
            }
            return bestCount <= 0 ? ';' : best;
        }

        function parseCSV(text, delimiter) {
            const rows = [];
            let row = [], field = '';
            let inQuotes = false;
            for (let i = 0; i < text.length; i++) {
                const ch = text[i];
                if (ch === '"') {
                    if (inQuotes && text[i + 1] === '"') { field += '"'; i++; continue; }
                    inQuotes = !inQuotes; continue;
                }
                if (!inQuotes && ch === delimiter) { row.push(field); field = ''; continue; }
                if (!inQuotes && (ch === '\n' || ch === '\r' && text[i + 1] !== '\n')) {
                    row.push(field); rows.push(row); row = []; field = ''; continue;
                }
                if (!inQuotes && ch === '\r') { continue; }
                field += ch;
            }
            if (field.length || row.length) { row.push(field); rows.push(row); }
            return rows.filter(r => r.some(cell => String(cell).trim().length > 0));
        }

        function normalizeKey(s) {
            return String(s || '')
                .toLowerCase()
                .normalize('NFD').replace(/[\u0300-\u036f]/g, '')
                .replace(/â‚¬/g, 'eur')
                .replace(/[^a-z0-9#]+/g, '');
        }

        const TARGETS = [
            { label: 'Place', keys: ['place', 'plaats'] },
            { label: 'Stock', keys: ['stock', 'voorraad'], loose: ['qty', 'quantity'] },
            { label: 'Brand', keys: ['brand'] },
            { label: 'Brand 2', keys: ['brand2', 'brand_2', 'subbrand', 'lijn', 'line'] },
            { label: 'Brand 3', keys: ['brand3', 'brand_3', 'series', 'serie', 'subline'] },
            { label: 'â‚¬ Unit', calculated: true },
            { label: '# Box', keys: ['#box', 'qtybox', 'aantalperbox', 'aantalbox', 'unitsperbox', 'pcsperbox', 'perbox', 'nbox'] },
            { label: 'â‚¬ Box', keys: ['eurbox', 'boxprice', 'prijsbox', 'prijsperbox', 'boxeur', 'eurperbox'] },
            { label: 'Size', keys: ['size', 'maat', 'afmeting', 'lengthring', 'format', 'vitola'] },
            { label: 'Country', keys: ['country', 'land', 'origin', 'herkomst', 'origine'] },
            { label: 'Distributor', keys: ['distributor', 'leverancier'] }
        ];

        function buildHeaderMapping(header) {
            const norm = header.map(normalizeKey);
            const used = new Set();
            const mapping = new Array(TARGETS.length).fill(-1);
            function findIndex(keys, allowLoose) {
                for (let i = 0; i < norm.length; i++) {
                    if (used.has(i)) continue;
                    for (const k of keys) {
                        if (norm[i] === k) {
                            used.add(i); return i;
                        }
                    }
                }
                if (!allowLoose) return -1;
                for (let i = 0; i < norm.length; i++) {
                    if (used.has(i)) continue;
                    for (const k of keys) {
                        if (norm[i].includes(k)) {
                            used.add(i); return i;
                        }
                    }
                }
                return -1;
            }
            TARGETS.forEach((t, idx) => {
                if (t.calculated) {
                    mapping[idx] = -1;
                    return;
                }
                let i = findIndex(t.keys, false);
                if (i === -1 && t.loose) i = findIndex(t.loose, true);
                if (i !== -1) { mapping[idx] = i; }
            });
            return { mapping, norm };
        }

        function showMessage(message, duration = 3000) {
            document.getElementById("messageText").textContent = message;
            document.getElementById("messageModal").style.display = "flex";
            if (duration > 0) {
                setTimeout(() => { hideMessage(); }, duration);
            }
        }

        function hideMessage() {
            document.getElementById("messageModal").style.display = "none";
        }

        let isAgeConfirmed = false;
        function showAgeVerification() { document.getElementById("ageVerificationModal").style.display = "flex"; }
        function confirmAge() {
            isAgeConfirmed = true;
            document.getElementById("ageVerificationModal").style.display = "none";
            showCatalog();
        }
        function denyAge() { window.location.href = "about:blank"; }

        function checkLogin() {
            const user = document.getElementById("username").value.trim();
            const pass = document.getElementById("password").value.trim();
            if (user === "Philbo" && pass === "sigaren2025") {
                document.getElementById("loginBox").style.display = "none";
                showAgeVerification();
            } else {
                document.getElementById("loginError").innerText = "Invalid login!";
            }
        }

        function loadCSV() {
            fetch("data.csv", { cache: 'no-cache' })
                .then(response => {
                    if (!response.ok) throw new Error('data.csv not found');
                    return response.text();
                })
                .then(text => {
                    text = stripBOM(text);
                    const delim = detectDelimiter(text);
                    const rows = parseCSV(text, delim);
                    if (!rows.length) throw new Error('CSV is empty');
                    const header = rows[0];
                    const { mapping } = buildHeaderMapping(header);
                    const dataRows = rows.slice(1);
                    allData = dataRows.map((row, index) => {
                        const newRow = { id: index };
                        TARGETS.forEach((t, idx) => {
                            if (t.calculated) {
                                const boxPriceIndex = mapping[TARGETS.findIndex(tt => tt.label === 'â‚¬ Box')];
                                const boxQtyIndex = mapping[TARGETS.findIndex(tt => tt.label === '# Box')];
                                const boxPriceStr = boxPriceIndex !== -1 ? (row[boxPriceIndex] || '0') : '0';
                                const boxQtyStr = boxQtyIndex !== -1 ? (row[boxQtyIndex] || '0') : '0';

                                const boxPrice = parseFloat(boxPriceStr.replace(',', '.'));
                                const boxQty = parseInt(boxQtyStr);

                                if (!isNaN(boxPrice) && !isNaN(boxQty) && boxQty > 0) {
                                    newRow[t.label] = (boxPrice / boxQty).toFixed(2);
                                } else {
                                    newRow[t.label] = 'N/A';
                                }
                            } else {
                                const srcIdx = mapping[idx];
                                newRow[t.label] = srcIdx !== -1 ? (row[srcIdx] !== undefined ? row[srcIdx] : '') : '';
                            }
                        });
                        return newRow;
                    });
                    renderTable(allData);
                })
                .catch(err => {
                    showMessage('Loading error: ' + err.message, 0);
                });
        }

        function renderTable(data) {
            const headerRow = document.getElementById("headerRow");
            headerRow.innerHTML = '';
            TARGETS.forEach((t) => {
                const th = document.createElement("th");
                th.textContent = t.label;
                th.addEventListener("click", () => sortTable(t.label));
                headerRow.appendChild(th);
            });
            const orderHeader = document.createElement("th");
            orderHeader.textContent = "Order (boxes)";
            headerRow.appendChild(orderHeader);

            const tbody = document.querySelector("#cigarTable tbody");
            tbody.innerHTML = '';
            if (data.length === 0) {
                const tr = document.createElement("tr");
                const td = document.createElement("td");
                td.colSpan = TARGETS.length + 1;
                td.textContent = "No results found.";
                td.style.textAlign = "center";
                tr.appendChild(td);
                tbody.appendChild(tr);
            } else {
                data.forEach(row => {
                    const tr = document.createElement("tr");
                    TARGETS.forEach((t) => {
                        const td = document.createElement("td");
                        td.textContent = row[t.label] || '';
                        td.setAttribute('data-label', t.label);
                        tr.appendChild(td);
                    });
                    const orderTd = document.createElement("td");
                    orderTd.setAttribute('data-label', 'Order (boxes)');
                    orderTd.classList.add('order-controls');
                    const orderInput = document.createElement("input");
                    orderInput.type = "number";
                    orderInput.min = "1";
                    orderInput.value = "1";
                    orderInput.style.width = "50px";
                    const addButton = document.createElement("button");
                    addButton.textContent = "Add";
                    addButton.onclick = () => addToCart(row.id, parseInt(orderInput.value));
                    orderTd.appendChild(orderInput);
                    orderTd.appendChild(addButton);
                    tr.appendChild(orderTd);
                    tbody.appendChild(tr);
                });
            }
        }

        function addToCart(productId, quantity) {
            if (quantity <= 0 || isNaN(quantity)) {
                showMessage("Box quantity must be greater than 0.", 3000);
                return;
            }
            const existingItem = cart.find(item => item.id === productId);
            const product = allData.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cart.push({ ...product, quantity: quantity });
            }
            updateCartCount();
            const brand2 = product['Brand 2'];
            const brand3 = product['Brand 3'];
            const size = product['Size'];
            showMessage(`Product added to cart: ${quantity} x ${brand2} - ${brand3} (${size})`, 2000);
        }

        function renderCart() {
            const cartList = document.getElementById("cartItemsList");
            const cartTotalEl = document.getElementById("cartTotal");
            cartList.innerHTML = '';
            let total = 0;
            if (cart.length === 0) {
                cartList.innerHTML = '<li>Your cart is empty.</li>';
                cartTotalEl.textContent = 'Total: â‚¬0.00';
                return;
            }
            cart.forEach(item => {
                const li = document.createElement("li");
                const priceString = item['â‚¬ Box'] || '0';
                const boxPrice = parseFloat(priceString.replace(',', '.'));
                const itemTotal = boxPrice * item.quantity;
                total += itemTotal;
                li.innerHTML = `
                    <div>
                        <span>${item.quantity} x box of ${item['Brand']} - ${item['Brand 2']} - ${item['Brand 3']} (${item.Size})</span>
                        <span>â‚¬${boxPrice.toFixed(2)}</span>
                    </div>
                    <div class="quantity-controls">
                        <button onclick="updateQuantity(${item.id}, -1)">-</button>
                        <span>${item.quantity}</span>
                        <button onclick="updateQuantity(${item.id}, 1)">+</button>
                        <button onclick="removeItem(${item.id})">Remove</button>
                    </div>
                `;
                cartList.appendChild(li);
            });
            cartTotalEl.textContent = `Total: â‚¬${total.toFixed(2)}`;
        }
        
        function updateQuantity(productId, change) {
            const item = cart.find(i => i.id === productId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) { removeItem(productId); }
            }
            renderCart();
            updateCartCount();
        }

        function removeItem(productId) {
            cart = cart.filter(item => item.id !== productId);
            renderCart();
            updateCartCount();
        }
        
        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById("cartItemCount").textContent = count;
        }

        function showCatalog() {
            if (!isAgeConfirmed) {
                showAgeVerification();
                return;
            }
            document.getElementById("catalog").style.display = "block";
            document.getElementById("cartSummary").style.display = "none";
            document.getElementById("checkoutForm").style.display = "none";
            loadCSV();
        }

        function showCart() {
            if (!isAgeConfirmed) {
                showAgeVerification();
                return;
            }
            document.getElementById("catalog").style.display = "none";
            document.getElementById("cartSummary").style.display = "block";
            document.getElementById("checkoutForm").style.display = "none";
            renderCart();
        }

        function showCheckout() {
            if (cart.length === 0) {
                showMessage("Your cart is empty. Please add products first.", 3000);
                return;
            }
            let total = 0;
            cart.forEach(item => {
                const priceString = item['â‚¬ Box'] || '0';
                const boxPrice = parseFloat(priceString.replace(',', '.'));
                total += boxPrice * item.quantity;
            });
            let deposit = total * 0.5;
            deposit = Math.ceil(deposit / 10) * 10;
            document.getElementById('depositAmount').textContent = `The deposit amount is: â‚¬${deposit.toFixed(2)}`;
            document.getElementById("catalog").style.display = "none";
            document.getElementById("cartSummary").style.display = "none";
            document.getElementById("checkoutForm").style.display = "block";
        }

        function sendOrder() {
            const name = document.getElementById("customerName").value;
            const email = document.getElementById("customerEmail").value;
            const phone = document.getElementById("customerPhone").value;
            const address = document.getElementById("customerAddress").value;
            const notes = document.getElementById("customerNotes").value;
            if (!name || !email) {
                showMessage("Name and email are required fields.", 3000);
                return;
            }
            let orderDetails = "Order from " + name + "\n\n";
            orderDetails += "Contact details:\n";
            orderDetails += "Name: " + name + "\n";
            orderDetails += "Email: " + email + "\n";
            if (phone) orderDetails += "Phone: " + phone + "\n";
            if (address) orderDetails += "Address: " + address + "\n";
            if (notes) orderDetails += "\nNotes:\n" + notes + "\n";
            orderDetails += "\nOrdered products:\n";
            let total = 0;
            cart.forEach(item => {
                const priceString = item['â‚¬ Box'] || '0';
                const boxPrice = parseFloat(priceString.replace(',', '.'));
                const itemTotal = boxPrice * item.quantity;
                total += itemTotal;
                orderDetails += `- ${item.quantity} x box of ${item['Brand']} - ${item['Brand 2']} - ${item['Brand 3']} (${item.Size}) - â‚¬${boxPrice.toFixed(2)} per box\n`;
            });
            let deposit = total * 0.5;
            deposit = Math.ceil(deposit / 10) * 10;
            const remaining = total - deposit;
            orderDetails += `\nTotal order amount: â‚¬${total.toFixed(2)}`;
            orderDetails += `\nDeposit to pay: â‚¬${deposit.toFixed(2)}`;
            orderDetails += `\nExpected amount still to pay (according to price on tax stamp) upon pickup: â‚¬${remaining.toFixed(2)}`;
            const subject = encodeURIComponent("Philbo Data Viewer Order - Order from " + name);
            const body = encodeURIComponent(orderDetails);
            window.open(`mailto:info@philbo.be?subject=${subject}&body=${body}`, '_blank');
            showMessage("Your order has been sent! An email client window should open.", 5000);
            cart = [];
            updateCartCount();
            showCatalog();
        }

        function filterTable() {
            const search = document.getElementById("searchBox").value.toLowerCase();
            const filteredData = allData.filter(row => {
                return Object.values(row).some(cell => {
                    return String(cell).toLowerCase().includes(search);
                });
            });
            renderTable(filteredData);
        }

        function sortTable(key) {
            const isAsc = currentSort.key !== key || !currentSort.asc;
            currentSort = { key, asc: isAsc };
            allData.sort((a, b) => {
                const A = String(a[key] || '').trim();
                const B = String(b[key] || '').trim();
                const numA = parseFloat(A.replace(/[^0-9.,-]/g, "").replace(",", "."));
                const numB = parseFloat(B.replace(/[^0-9.,-]/g, "").replace(",", "."));
                let result = 0;
                if (!isNaN(numA) && !isNaN(numB)) {
                    result = numA - numB;
                } else {
                    result = A.localeCompare(B, 'en', { sensitivity: 'base' });
                }
                return isAsc ? result : -result;
            });
            renderTable(allData);
            const headers = document.querySelectorAll("#headerRow th");
            headers.forEach(h => {
                h.classList.remove("sort-asc", "sort-desc");
                if (h.textContent === key) {
                    h.classList.add(isAsc ? "sort-asc" : "sort-desc");
                }
            });
        }

        document.addEventListener("keydown", function(e) {
            const k = e.key.toLowerCase();
            if (e.key === "PrintScreen" || (e.ctrlKey && (k === "c" || k === "p" || k === "s")) || (e.metaKey && (k === "c" || k === "p" || k === "s"))) {
                e.preventDefault();
                showMessage("Copying/printing/saving is blocked!", 0);
            }
        });
    </script>
</body>
</html>
