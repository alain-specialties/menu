<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>Data Viewer</title>
<style>
    body { font-family: Arial, sans-serif; background-color: #111; color: white; padding: 20px; user-select: none; }
    h1 { text-align: center; color: #c0a16b; }
    #loginBox { text-align: center; margin-top: 100px; }
    input { padding: 8px; margin: 5px; }
    table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    th, td { border: 1px solid #555; padding: 6px; text-align: center; }
    th { background-color: #333; }
    tr:nth-child(even) { background-color: #222; }
    #searchBox { margin: 10px 0; padding: 8px; width: 300px; }
</style>
</head>
<body oncontextmenu="return false;">
<h1>Sigaren Catalogus</h1>
<div id="loginBox">
    <h2>Login</h2>
    <input type="text" id="username" placeholder="Gebruikersnaam"><br>
    <input type="password" id="password" placeholder="Wachtwoord"><br>
    <button id="loginBtn">Inloggen</button>
    <p id="loginError" style="color:red;"></p>
</div>
<div id="catalog" style="display:none;">
    <input type="text" id="searchBox" placeholder="Zoeken..." onkeyup="filterTable()">
    <div id="status" style="margin:6px 0; font-size: 0.9rem; color:#f5c542;"></div>
    <table id="cigarTable">
        <thead>
            <tr>
                <th>Stock</th>
                <th>Brand</th>
                <th>Brand 2</th>
                <th>Brand 3</th>
                <th>Box</th>
                <th>€ Unit</th>
                <th># Box</th>
                <th>€ Box</th>
                <th>Size</th>
                <th>Country</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>
<script>
// Login check
function checkLogin() {
    const user = document.getElementById("username").value.trim();
    const pass = document.getElementById("password").value.trim();
    if (user === "Philbo" && pass === "sigaren2025") {
        document.getElementById("loginBox").style.display = "none";
        document.getElementById("catalog").style.display = "block";
        loadCSV();
    } else {
        document.getElementById("loginError").innerText = "Ongeldige login!";
    }
}

document.getElementById("loginBtn").addEventListener("click", checkLogin);

document.getElementById("password").addEventListener("keyup", function(e) {
    if (e.key === "Enter") checkLogin();
});

// CSV laden en weergeven
function loadCSV() {
    const status = document.getElementById('status');
    fetch("data.csv", { cache: 'no-cache' })
        .then(response => {
            if (!response.ok) throw new Error('data.csv niet gevonden');
            return response.text();
        })
        .then(text => {
            const rows = text.trim().split(/\r?\n/).map(r => r.split(';'));
            const tbody = document.querySelector("#cigarTable tbody");
            tbody.innerHTML = '';
            for (let i = 1; i < rows.length; i++) {
                const tr = document.createElement("tr");
                for (let j = 0; j < 10; j++) {
                    const td = document.createElement("td");
                    td.textContent = rows[i][j] || '';
                    tr.appendChild(td);
                }
                tbody.appendChild(tr);
            }
            status.textContent = `Rijen geladen: ${rows.length - 1}`;
        })
        .catch(err => {
            status.textContent = 'Fout bij laden: ' + err.message;
        });
}

// Zoekfunctie
function filterTable() {
    const search = document.getElementById("searchBox").value.toLowerCase();
    const rows = document.querySelectorAll("#cigarTable tbody tr");
    rows.forEach(row => {
        row.style.display = row.innerText.toLowerCase().includes(search) ? "" : "none";
    });
}
</script>
</body>
</html>
